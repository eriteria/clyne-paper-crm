#!/bin/bash

echo "ğŸ”„ Clyne Paper CRM - Data Migration Guide"
echo "=========================================="
echo ""

echo "ğŸ“š Available Migration Scripts:"
echo "------------------------------"
echo "1. export-data.js    - Export all data from local database"
echo "2. import-data.js    - Import data to production database"  
echo "3. migrate-data.js   - Complete migration (export + upload + import)"
echo ""

echo "ğŸš€ Quick Start - Complete Migration:"
echo "-----------------------------------"
echo "node migrate-data.js"
echo ""

echo "ğŸ“¤ Export Only (for manual transfer):"
echo "------------------------------------"
echo "node export-data.js"
echo ""

echo "ğŸ“¥ Import Only (run on production):"
echo "----------------------------------"
echo "fly ssh console --app clyne-paper-crm-backend -C \"node import-data.js /app/data-export-*.json --clear --preserve-admin\""
echo ""

echo "ğŸ”§ Manual Migration Steps:"
echo "-------------------------"
echo "1. Export local data:"
echo "   node export-data.js"
echo ""
echo "2. Upload to production:"
echo "   fly ssh sftp put data-export-*.json /app/ --app clyne-paper-crm-backend"
echo ""
echo "3. Import on production:"
echo "   fly ssh console --app clyne-paper-crm-backend -C \"node import-data.js /app/data-export-*.json --clear --preserve-admin\""
echo ""

echo "âš™ï¸ Import Options:"
echo "-----------------"
echo "--clear                 Clear existing data before import"
echo "--preserve-admin        Keep production admin user (recommended)"
echo "--skip-users           Skip user import"
echo "--skip-audit-logs      Skip audit log import"
echo ""

echo "ğŸ”’ Security Notes:"
echo "-----------------"
echo "â€¢ Production admin user (admin@clynepaper.com) is preserved by default"
echo "â€¢ User passwords are migrated (consider forcing password resets)"
echo "â€¢ Audit logs are limited to last 1000 entries to avoid huge files"
echo ""

echo "ğŸ“Š What gets migrated:"
echo "---------------------"
echo "âœ… Roles and permissions"
echo "âœ… Regions and teams"
echo "âœ… Users (with preserved passwords)"
echo "âœ… Customers"
echo "âœ… Inventory items"
echo "âœ… Waybills and items"
echo "âœ… Invoices and items"
echo "âœ… Audit logs (last 1000)"
echo ""

echo "â“ Need help? Run:"
echo "node migrate-data.js --help"
